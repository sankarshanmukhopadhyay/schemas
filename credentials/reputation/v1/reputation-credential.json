{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/sankarshanmukhopadhyay/schemas/v0.2.0/credentials/reputation/v1/reputation-credential.json",
  "$credentialContext": [
    "https://www.w3.org/ns/credentials/v2",
    "https://schemas.archetech.com/credentials/reputation/v1"
  ],
  "$credentialType": [
    "VerifiableCredential",
    "DIDReputationCredential"
  ],
  "title": "DID Reputation Credential",
  "description": "General-purpose reputation credential for any DID holder. Domain-specific profiles define valid metric keys, enabling interoperable reputation across heterogeneous systems.",
  "type": "object",
  "properties": {
    "domain": {
      "type": "string",
      "description": "Profile identifier defining valid metric keys (e.g., 'hive:advisor', 'agent:general', 'hive:node'). Follows namespace:type pattern.",
      "pattern": "^[a-z]+:[a-z][a-z0-9_-]*$"
    },
    "period": {
      "type": "object",
      "description": "Evaluation window bounding the reputation measurement.",
      "properties": {
        "start": {
          "type": "string",
          "format": "date-time",
          "description": "Start of evaluation period (ISO 8601)"
        },
        "end": {
          "type": "string",
          "format": "date-time",
          "description": "End of evaluation period (ISO 8601)"
        }
      },
      "required": [
        "start",
        "end"
      ]
    },
    "metrics": {
      "type": "object",
      "description": "Domain-specific key-value pairs. Keys must conform to the domain profile. Values are numbers or strings.",
      "additionalProperties": {
        "oneOf": [
          {
            "type": "number"
          },
          {
            "type": "string"
          },
          {
            "type": "integer"
          }
        ]
      }
    },
    "outcome": {
      "type": "string",
      "enum": [
        "renew",
        "revoke",
        "neutral"
      ],
      "description": "Evaluation outcome. 'renew' = positive (would engage again), 'revoke' = negative (relationship terminated), 'neutral' = informational only."
    },
    "evidence": {
      "type": "array",
      "description": "References to signed receipts, attestations, or snapshots backing the metrics.",
      "items": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "SignedReceipt",
              "MetricSnapshot",
              "Attestation",
              "AuditLog"
            ],
            "description": "Category of evidence"
          },
          "id": {
            "type": "string",
            "description": "DID or URI referencing the evidence credential"
          },
          "description": {
            "type": "string",
            "description": "Human-readable description of the evidence"
          }
        },
        "required": [
          "type",
          "id"
        ]
      }
    }
  },
  "required": [
    "domain",
    "period",
    "metrics",
    "outcome"
  ]
}

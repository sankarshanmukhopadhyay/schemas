{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$credentialContext": [
        "https://www.w3.org/ns/credentials/v2",
        "https://schemas.archetech.com/credentials/reputation/v1"
    ],
    "$credentialType": [
        "VerifiableCredential",
        "DIDReputationProfile"
    ],
    "title": "DID Reputation Profile",
    "description": "Defines valid metric keys, types, and semantics for a specific reputation domain. Published as a credential to enable discovery and validation of DIDReputationCredentials.",
    "type": "object",
    "properties": {
        "domain": {
            "type": "string",
            "description": "Unique profile identifier (e.g., 'hive:advisor'). Must match the domain field in DIDReputationCredentials using this profile.",
            "pattern": "^[a-z]+:[a-z][a-z0-9_-]*$"
        },
        "version": {
            "type": "string",
            "description": "Semantic version of the profile (major.minor.patch).",
            "pattern": "^\\d+\\.\\d+\\.\\d+$"
        },
        "description": {
            "type": "string",
            "description": "Human-readable description of what this profile measures"
        },
        "subjectType": {
            "type": "string",
            "description": "Expected type of the credential subject (e.g., 'Lightning fleet advisor', 'AI agent')"
        },
        "issuerType": {
            "type": "string",
            "description": "Expected type of the credential issuer (e.g., 'Node operator', 'Task delegator')"
        },
        "metrics": {
            "type": "object",
            "description": "Metric definitions. Each key is a metric name; value describes its type, range, and semantics.",
            "additionalProperties": {
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": ["number", "integer", "string"],
                        "description": "Data type of the metric value"
                    },
                    "range": {
                        "type": "array",
                        "items": { "type": "number" },
                        "minItems": 2,
                        "maxItems": 2,
                        "description": "Valid range [min, max] for numeric metrics"
                    },
                    "unit": {
                        "type": "string",
                        "description": "Unit of measurement (e.g., 'percent', 'ppm', 'sats', 'milliseconds')"
                    },
                    "description": {
                        "type": "string",
                        "description": "Human-readable description of this metric"
                    }
                },
                "required": ["type", "description"]
            }
        },
        "requiredMetrics": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Metric keys that must be present in credentials using this profile"
        },
        "optionalMetrics": {
            "type": "array",
            "items": { "type": "string" },
            "description": "Metric keys that may be present but are not required"
        }
    },
    "required": ["domain", "version", "description", "metrics", "requiredMetrics"]
}
